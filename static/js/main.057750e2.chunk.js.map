{"version":3,"sources":["components/App.js","index.js"],"names":["App","props","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","state","clubName","mFile","fFile","out","mNames","step","fileUpload","bind","assertThisInitialized","textInput","getForm","onSubmit","getLoading","getOutput","processData","getNames","e","target","files","type","alert","value","setState","defineProperty","name","console","log","preventDefault","failed","JSZip","loadAsync","mzip","fzip","addSingles","filter","includes","fNames","genNames","forEach","file","names","_this2","removeEnd","split","push","outGenNames","getGenders","pop","join","singles","gender","_this3","first","last","zip","relativePath","zipEntry","dir","startsWith","error","message","prevNames","n","contains","fetch","json","res","list","el","x","length","react_default","a","createElement","className","onChange","onClick","Component","ReactDOM","render","src_components_App","document","getElementById"],"mappings":"sPA8JeA,sBAxJb,SAAAA,EAAYC,GAAM,IAAAC,EAAA,OAAAC,OAAAC,EAAA,EAAAD,CAAAE,KAAAL,IAChBE,EAAAC,OAAAG,EAAA,EAAAH,CAAAE,KAAAF,OAAAI,EAAA,EAAAJ,CAAAH,GAAAQ,KAAAH,KAAMJ,KACDQ,MAAQ,CACXC,SAAU,GACVC,MAAO,GACPC,MAAO,GACPC,IAAK,KACLC,OAAQ,GACRC,KAAM,GAERb,EAAKc,WAAad,EAAKc,WAAWC,KAAhBd,OAAAe,EAAA,EAAAf,QAAAe,EAAA,EAAAf,CAAAD,KAClBA,EAAKiB,UAAYjB,EAAKiB,UAAUF,KAAfd,OAAAe,EAAA,EAAAf,QAAAe,EAAA,EAAAf,CAAAD,KACjBA,EAAKkB,QAAUlB,EAAKkB,QAAQH,KAAbd,OAAAe,EAAA,EAAAf,QAAAe,EAAA,EAAAf,CAAAD,KACfA,EAAKmB,SAAWnB,EAAKmB,SAASJ,KAAdd,OAAAe,EAAA,EAAAf,QAAAe,EAAA,EAAAf,CAAAD,KAChBA,EAAKoB,WAAapB,EAAKoB,WAAWL,KAAhBd,OAAAe,EAAA,EAAAf,QAAAe,EAAA,EAAAf,CAAAD,KAClBA,EAAKqB,UAAYrB,EAAKqB,UAAUN,KAAfd,OAAAe,EAAA,EAAAf,QAAAe,EAAA,EAAAf,CAAAD,KACjBA,EAAKsB,YAActB,EAAKsB,YAAYP,KAAjBd,OAAAe,EAAA,EAAAf,QAAAe,EAAA,EAAAf,CAAAD,KACnBA,EAAKuB,SAAWvB,EAAKuB,SAASR,KAAdd,OAAAe,EAAA,EAAAf,QAAAe,EAAA,EAAAf,CAAAD,KAjBAA,0EAmBPwB,GACmB,oBAAzBA,EAAEC,OAAOC,MAAM,GAAGC,MACnBC,MAAM,8CACNJ,EAAEC,OAAOI,MAAQ,IAEjB1B,KAAK2B,SAAL7B,OAAA8B,EAAA,EAAA9B,CAAA,GAAgBuB,EAAEC,OAAOO,KAAOR,EAAEC,OAAOC,MAAM,uCAGzCF,GACRrB,KAAK2B,SAAL7B,OAAA8B,EAAA,EAAA9B,CAAA,GAAgBuB,EAAEC,OAAOO,KAAOR,EAAEC,OAAOI,iFAE5BL,mEACbS,QAAQC,IAAI/B,KAAKI,MAAME,OACvBe,EAAEW,iBACFhC,KAAK2B,SAAS,CAACjB,KAAK,IACpBV,KAAKmB,iSAICX,EAAM,GACNyB,EAAS,YAEIC,IAAMC,UAAUnC,KAAKI,MAAME,qBAAxC8B,kBACaF,IAAMC,UAAUnC,KAAKI,MAAMG,cAAxC8B,SACF5B,EAAST,KAAKoB,SAASgB,GAC3BpC,KAAKsC,WAAW7B,EAAO,OAAOD,GAC9BC,EAASA,EAAO8B,OAAO,SAAAV,GAAI,OAAEA,EAAKW,SAAS,OAEvCC,EAASzC,KAAKoB,SAASiB,GAC3BrC,KAAKsC,WAAWG,EAAO,SAASjC,GAChCiC,EAASA,EAAOF,OAAO,SAAAV,GAAI,OAAEA,EAAKW,SAAS,OAE3CV,QAAQC,IAAIvB,GACZsB,QAAQC,IAAItB,GACZqB,QAAQC,IAAIU,GAENC,EAAW,GACjBjC,EAAOkC,QAAQ,SAAAC,GACb,IACE,IAAMC,EAAQC,EAAKC,UAAUH,GAAMI,MAAM,KAAK,GAAGA,MAAM,KACvDN,EAASO,KAAKJ,GAEhB,MAAMxB,GACJY,EAAOgB,KAAKL,MAGhBd,QAAQC,IAAIW,GACRQ,EAAc,GAClBlD,KAAKmD,WAAWT,EAASQ,wIAEjBN,GACR,IAAIpC,EAAMoC,EAAKI,MAAM,KAErB,OADAxC,EAAI4C,MACG5C,EAAI6C,KAAK,uCAEPC,EAAQC,EAAO/C,GAAI,IAAAgD,EAAAxD,MAC5BsD,EAAUA,EAAQf,OAAO,SAAAV,GAAI,OAAGA,EAAKW,SAAS,QACtCG,QAAQ,SAAAC,GACd,IAAMf,EAAO2B,EAAKT,UAAUH,GACtBa,EAAQ5B,EAAKmB,MAAM,KAAK,GACxBU,EAAO7B,EAAKmB,MAAM,KAAK,GAC7BxC,EAAIyC,KAAK,CAACL,OAAKa,QAAMC,OAAKH,8CAGrBI,GACP,IAAMd,EAAQ,GACd,IACEc,EAAIhB,QAAQ,SAACiB,EAAcC,GACrBA,EAASC,KAAQD,EAAShC,KAAKkC,WAAW,aAC5ClB,EAAMI,KAAKY,EAAShC,QAExB,MAAMmC,GACNvC,MAAMuC,EAAMC,SACZjE,KAAK2B,SAAS,CAACjB,KAAK,IAEtB,OAAOmC,6EAEQA,EAAOqB,mHACNrB,uEAALsB,UACJnE,KAAKoE,SAASF,EAAUC,2BAC3BrC,QAAQC,IAAIoC,EAAE,cACWE,MAAM,kCAAkC,SAASrB,MAAM,KAAK,oCAAKsB,eAApFC,SAGNzC,QAAQC,IAAIwC,EAAID,6aAIbE,EAAKC,GACZ,OAAOD,EAAKjC,OAAO,SAAAmC,GAAC,OAAEA,EAAE7B,QAAQ4B,IAAIE,yCAGpC,OACEC,EAAAC,EAAAC,cAAA,OAAKC,UAAU,OACfH,EAAAC,EAAAC,cAAA,0BACaF,EAAAC,EAAAC,cAAA,SAAOtD,KAAK,OAAOE,MAAQ1B,KAAKI,MAAMC,SAAUwB,KAAK,WAAWmD,SAAUhF,KAAKc,YAC1F8D,EAAAC,EAAAC,cAAA,WACAF,EAAAC,EAAAC,cAAA,WAHF,kBAIiBF,EAAAC,EAAAC,cAAA,SAAOtD,KAAK,OAAOK,KAAK,QAAQmD,SAAUhF,KAAKW,aAC9DiE,EAAAC,EAAAC,cAAA,WACAF,EAAAC,EAAAC,cAAA,WANF,oBAOmBF,EAAAC,EAAAC,cAAA,SAAOtD,KAAK,OAAOK,KAAK,QAAQmD,SAAUhF,KAAKW,aAChEiE,EAAAC,EAAAC,cAAA,WACAF,EAAAC,EAAAC,cAAA,WACAF,EAAAC,EAAAC,cAAA,SAAOtD,KAAK,SAASE,MAAM,UAAUuD,QAASjF,KAAKgB,kDAMvD,OACE4D,EAAAC,EAAAC,cAAA,0DAMF,OACEF,EAAAC,EAAAC,cAAA,sDAMF,OAAqB,IAAlB9E,KAAKI,MAAMM,KACLV,KAAKe,UACY,IAAlBf,KAAKI,MAAMM,KACVV,KAAKiB,aAELjB,KAAKkB,mBArJAgE,cCAlBC,IAASC,OAAOR,EAAAC,EAAAC,cAACO,EAAD,MAASC,SAASC,eAAe","file":"static/js/main.057750e2.chunk.js","sourcesContent":["import React, { Component } from 'react';\nimport './App.css';\nimport JSZip from 'jszip';\nimport { debug } from 'util';\n\nclass App extends Component {\n  constructor(props){\n    super(props);\n    this.state = {\n      clubName: \"\",\n      mFile: \"\",\n      fFile: \"\",\n      out: null,\n      mNames: [],\n      step: 0\n    }\n    this.fileUpload = this.fileUpload.bind(this);\n    this.textInput = this.textInput.bind(this);\n    this.getForm = this.getForm.bind(this);\n    this.onSubmit = this.onSubmit.bind(this);\n    this.getLoading = this.getLoading.bind(this);\n    this.getOutput = this.getOutput.bind(this);\n    this.processData = this.processData.bind(this);\n    this.getNames = this.getNames.bind(this);\n  }\n  fileUpload(e){\n    if(e.target.files[0].type!==\"application/zip\"){\n      alert(\"please upload only zip files of the images\");\n      e.target.value = \"\";\n    }else{\n      this.setState({[e.target.name]: e.target.files[0]});\n    }\n  }\n  textInput(e){\n    this.setState({[e.target.name]: e.target.value});\n  }\n  async onSubmit(e){\n    console.log(this.state.mFile)\n    e.preventDefault();\n    this.setState({step:1});\n    this.processData()\n  }\n\n  async processData(){\n    const out = []\n    const failed = []\n    \n    const mzip = await JSZip.loadAsync(this.state.mFile);\n    const fzip = await JSZip.loadAsync(this.state.fFile);\n    let mNames = this.getNames(mzip);\n    this.addSingles(mNames,\"Male\",out);\n    mNames = mNames.filter(name=>name.includes(\"&\"))\n\n    let fNames = this.getNames(fzip);\n    this.addSingles(fNames,\"Female\",out);\n    fNames = fNames.filter(name=>name.includes(\"&\"))\n\n    console.log(out);\n    console.log(mNames);\n    console.log(fNames);\n\n    const genNames = []\n    mNames.forEach(file=>{\n      try{\n        const names = this.removeEnd(file).split(',')[1].split(\"&\");\n        genNames.push(names);\n      }\n      catch(e){\n        failed.push(file);\n      }\n    });\n    console.log(genNames);\n    let outGenNames = []\n    this.getGenders(genNames,outGenNames);\n  }\n  removeEnd(file){\n    let out = file.split('-');\n    out.pop();\n    return out.join(\"\");\n  }\n  addSingles(singles,gender,out){\n    singles = singles.filter(name=>!name.includes(\"&\"))\n    singles.forEach(file=>{\n      const name = this.removeEnd(file);\n      const first = name.split(',')[1];\n      const last = name.split(',')[0];\n      out.push({file,first,last,gender})\n    });\n  }\n  getNames(zip){\n    const names = []\n    try{\n      zip.forEach((relativePath, zipEntry) => {\n        if(!zipEntry.dir && !zipEntry.name.startsWith(\"__MACOSX\"))\n          names.push(zipEntry.name);\n      });\n    } catch(error){\n      alert(error.message);\n      this.setState({step:0});\n    }    \n    return names\n  }\n  async getGenders(names, prevNames){\n    for (const n of names){\n      if (!this.contains(prevNames,n)){\n        console.log(n[0])\n        const res = await (await fetch(\"https://api.genderize.io/?name=\"+\"Albert\".split(' ')[0])).json();\n        debugger;\n\n        console.log(res.json);\n      }\n    }\n  }\n  contains(list,el){\n    return list.filter(x=>x.names===el).length;\n  }\n  getForm(){\n    return (\n      <div className=\"App\">\n      <form>\n        Club Name: <input type=\"text\" value= {this.state.clubName} name=\"clubName\" onChange={this.textInput}/>\n        <br/>\n        <br/>\n        Male zip file: <input type=\"file\" name=\"mFile\" onChange={this.fileUpload}/>\n        <br/>\n        <br/>\n        Female zip file: <input type=\"file\" name=\"fFile\" onChange={this.fileUpload}/>\n        <br/>\n        <br/>\n        <input type=\"submit\" value=\"Process\" onClick={this.onSubmit}/>\n      </form>\n      </div>\n    );\n  }\n  getLoading(){\n    return (\n      <div>\n        Loading\n      </div>\n    )\n  }\n  getOutput(){\n    return (\n      <div>\n        Output\n      </div>\n    )\n  }\n  render() {\n    if(this.state.step===0)\n      return this.getForm();\n    else if(this.state.step===1)\n      return this.getLoading()\n    else\n      return this.getOutput()\n  }\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './components/App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n\n"],"sourceRoot":""}