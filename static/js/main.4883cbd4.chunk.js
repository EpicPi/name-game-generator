(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{137:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(62),i=a.n(s),l=(a(73),a(4)),u=a.n(l),c=a(20),o=a(11),m=a(63),f=a(64),p=a(66),h=a(65),b=a(67),d=a(2),v=(a(77),a(29)),g=a.n(v),y=a(30),O=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).state={clubName:"",mFile:"",fFile:"",out1:null,out2:null,step:0,total:0,completed:0},a.fileUpload=a.fileUpload.bind(Object(d.a)(Object(d.a)(a))),a.textInput=a.textInput.bind(Object(d.a)(Object(d.a)(a))),a.getForm=a.getForm.bind(Object(d.a)(Object(d.a)(a))),a.onSubmit=a.onSubmit.bind(Object(d.a)(Object(d.a)(a))),a.getLoading=a.getLoading.bind(Object(d.a)(Object(d.a)(a))),a.getOutput=a.getOutput.bind(Object(d.a)(Object(d.a)(a))),a.processData=a.processData.bind(Object(d.a)(Object(d.a)(a))),a.getNames=a.getNames.bind(Object(d.a)(Object(d.a)(a))),a}return Object(b.a)(t,e),Object(f.a)(t,[{key:"fileUpload",value:function(e){e.target.files[0]&&"application/zip"!==e.target.files[0].type?(alert("please upload only zip files of the images"),e.target.value=""):this.setState(Object(o.a)({},e.target.name,e.target.files[0]))}},{key:"textInput",value:function(e){this.setState(Object(o.a)({},e.target.name,e.target.value))}},{key:"onSubmit",value:function(){var e=Object(c.a)(u.a.mark(function e(t){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),this.state.mFile&&this.state.fFile&&this.state.clubName){e.next=4;break}return alert("Please provide all the information"),e.abrupt("return");case 4:this.setState({step:1}),this.processData();case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"processData",value:function(){var e=Object(c.a)(u.a.mark(function e(){var t,a,n,r,s,i,l;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],a=[],e.next=4,g.a.loadAsync(this.state.mFile);case 4:return n=e.sent,r=this.getNames(n),this.addSingles(r,"male",t),r=r.filter(function(e){return e.includes("&")}),e.next=10,g.a.loadAsync(this.state.fFile);case 10:return s=e.sent,i=this.getNames(s),this.addSingles(i,"female",t),i=i.filter(function(e){return e.includes("&")}),this.setState({total:i.length+r.length}),this.setState({completed:t.length}),l=[],r=this.splitNames(r,a),e.next=20,this.getGenders(r,l);case 20:return r=e.sent,i=this.splitNames(i,a),e.next=24,this.getGenders(i,l);case 24:i=e.sent,t=(t=t.concat(this.mapNamesToOut(r,"male"))).concat(this.mapNamesToOut(i,"female")),this.setState({out1:t}),this.setState({out2:this.processData2(t)}),this.setState({step:2});case 30:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"processData2",value:function(e){var t=this,a=[],n=[],r=[];return e.forEach(function(e){var t="";"male"===e.gender?(t="Mr."+e.first+" "+e.last,n.push(t)):(t=("true"===e.married?"Mrs.":"Ms.")+e.first+" "+e.last,r.push(t));e.fullName=t}),e.forEach(function(e){var s=t.getWrongAnswers(e.fullName,"female"===e.gender?r:n);a.push({file:e.file,name:e.fullName,answer1:s[0],answer2:s[1],answer3:s[2]})}),a}},{key:"shuffleArray",value:function(e){for(var t=e.length-1;t>0;t--){var a=Math.floor(Math.random()*(t+1)),n=e[t];e[t]=e[a],e[a]=n}}},{key:"getWrongAnswers",value:function(e,t){var a=[];this.shuffleArray(t);for(var n=0;a.length<3;)t[n]!==e&&a.push(t[n]),n++;return a}},{key:"mapNamesToOut",value:function(e,t){var a=this,n=[];return e.forEach(function(e){var r=e[e.names[0]],s=e[e.names[1]],i=0;i=r.gender===s.gender?r.gender!==t?r.probability>s.probability?1:0:r.probability<s.probability?1:0:r.gender===t?0:1,n.push({file:e.file,first:e.names[i],last:a.removeEnd(e.file).split(",")[0],gender:t,married:"true"})}),n}},{key:"splitNames",value:function(e,t){var a=this,n=[];return e.forEach(function(e){try{var r=a.removeEnd(e).split(",")[1].split("&");r=r.map(function(e){return e.trim()}),n.push({names:r,file:e})}catch(s){t.push(e)}}),n}},{key:"removeEnd",value:function(e){var t=e.split("-");return t.pop(),t.join("")}},{key:"addSingles",value:function(e,t,a){var n=this;(e=e.filter(function(e){return!e.includes("&")})).forEach(function(e){var r=n.removeEnd(e),s=r.split(",")[1].trim(),i=r.split(",")[0].trim();a.push({file:e,first:s,last:i,gender:t,married:"false"})})}},{key:"getNames",value:function(e){var t=[];try{e.forEach(function(e,a){a.dir||a.name.startsWith("__MACOSX")||t.push(a.name)})}catch(a){alert(a.message),this.setState({step:0})}return t}},{key:"getGenders",value:function(){var e=Object(c.a)(u.a.mark(function e(t,a){var n,r,s,i,l,c,m,f=this;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=[],r=!0,s=!1,i=void 0,e.prev=4,l=u.a.mark(function e(){var t,r,s,i;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=m.value,(s=a.filter(function(e){return e.name===r.names[0].split(" ")[0]})).length){e.next=12;break}return e.next=5,fetch("https://api.genderize.io/?name="+r.names[0].split(" ")[0]);case 5:return e.next=7,e.sent.json();case 7:(s=e.sent).error&&alert(s.error),a.push(s),e.next=13;break;case 12:s=s[0];case 13:if((i=a.filter(function(e){return e.name===r.names[1].split(" ")[0]})).length){e.next=24;break}return e.next=17,fetch("https://api.genderize.io/?name="+r.names[1].split(" ")[0]);case 17:return e.next=19,e.sent.json();case 19:i=e.sent,s.error&&alert(s.error),a.push(i),e.next=25;break;case 24:i=i[0];case 25:f.setState({completed:f.state.completed+2}),n.push((t={names:r.names},Object(o.a)(t,r.names[0],s),Object(o.a)(t,r.names[1],i),Object(o.a)(t,"file",r.file),t));case 27:case"end":return e.stop()}},e,this)}),c=t[Symbol.iterator]();case 7:if(r=(m=c.next()).done){e.next=12;break}return e.delegateYield(l(),"t0",9);case 9:r=!0,e.next=7;break;case 12:e.next=18;break;case 14:e.prev=14,e.t1=e.catch(4),s=!0,i=e.t1;case 18:e.prev=18,e.prev=19,r||null==c.return||c.return();case 21:if(e.prev=21,!s){e.next=24;break}throw i;case 24:return e.finish(21);case 25:return e.finish(18);case 26:return e.abrupt("return",n);case 27:case"end":return e.stop()}},e,this,[[4,14,18,26],[19,,21,25]])}));return function(t,a){return e.apply(this,arguments)}}()},{key:"getForm",value:function(){return r.a.createElement("div",{className:"App"},r.a.createElement("form",null,"Club Name: ",r.a.createElement("input",{type:"text",value:this.state.clubName,name:"clubName",onChange:this.textInput}),r.a.createElement("br",null),r.a.createElement("br",null),"Male zip file: ",r.a.createElement("input",{type:"file",name:"mFile",onChange:this.fileUpload}),r.a.createElement("br",null),r.a.createElement("br",null),"Female zip file: ",r.a.createElement("input",{type:"file",name:"fFile",onChange:this.fileUpload}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("input",{type:"submit",value:"Process",onClick:this.onSubmit})))}},{key:"getLoading",value:function(){return r.a.createElement("div",null,"Loading",r.a.createElement("br",null),"completed "+this.state.completed,r.a.createElement("br",null),"of "+this.state.total)}},{key:"getOutput",value:function(){return r.a.createElement("div",null,r.a.createElement(y.CSVLink,{data:this.state.out1,filename:this.state.clubName+"_data_rich.csv"},"Download Name-Game CSV for ",this.state.clubName," (data rich version)"),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(y.CSVLink,{data:this.state.out2,filename:this.state.clubName+"_wrong_answers.csv"},"Download Name-Game CSV for ",this.state.clubName," (wrong answer generated version)"))}},{key:"render",value:function(){return 0===this.state.step?this.getForm():1===this.state.step?this.getLoading():this.getOutput()}}]),t}(n.Component);i.a.render(r.a.createElement(O,null),document.getElementById("root"))},68:function(e,t,a){e.exports=a(137)},73:function(e,t,a){},77:function(e,t,a){},83:function(e,t){},85:function(e,t){}},[[68,2,1]]]);
//# sourceMappingURL=main.4883cbd4.chunk.js.map