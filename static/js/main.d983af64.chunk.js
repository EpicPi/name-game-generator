(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{137:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),i=a(61),s=a.n(i),u=(a(73),a(4)),c=a.n(u),l=a(20),o=a(11),p=a(62),m=a(63),f=a(66),h=a(64),b=a(67),d=a(2),v=(a(77),a(29)),g=a.n(v),O=a(65),y=function(e){function t(e){var a;return Object(p.a)(this,t),(a=Object(f.a)(this,Object(h.a)(t).call(this,e))).state={clubName:"",mFile:"",fFile:"",out1:null,out2:null,mNames:[],step:0},a.fileUpload=a.fileUpload.bind(Object(d.a)(Object(d.a)(a))),a.textInput=a.textInput.bind(Object(d.a)(Object(d.a)(a))),a.getForm=a.getForm.bind(Object(d.a)(Object(d.a)(a))),a.onSubmit=a.onSubmit.bind(Object(d.a)(Object(d.a)(a))),a.getLoading=a.getLoading.bind(Object(d.a)(Object(d.a)(a))),a.getOutput=a.getOutput.bind(Object(d.a)(Object(d.a)(a))),a.processData=a.processData.bind(Object(d.a)(Object(d.a)(a))),a.getNames=a.getNames.bind(Object(d.a)(Object(d.a)(a))),a}return Object(b.a)(t,e),Object(m.a)(t,[{key:"fileUpload",value:function(e){"application/zip"!==e.target.files[0].type?(alert("please upload only zip files of the images"),e.target.value=""):this.setState(Object(o.a)({},e.target.name,e.target.files[0]))}},{key:"textInput",value:function(e){this.setState(Object(o.a)({},e.target.name,e.target.value))}},{key:"onSubmit",value:function(){var e=Object(l.a)(c.a.mark(function e(t){return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:console.log(this.state.mFile),t.preventDefault(),this.setState({step:1}),this.processData();case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"processData",value:function(){var e=Object(l.a)(c.a.mark(function e(){var t,a,n,r,i,s,u;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],a=[],e.next=4,g.a.loadAsync(this.state.mFile);case 4:return n=e.sent,r=this.getNames(n),this.addSingles(r,"male",t),r=r.filter(function(e){return e.includes("&")}),e.next=10,g.a.loadAsync(this.state.fFile);case 10:return i=e.sent,s=this.getNames(i),this.addSingles(s,"female",t),s=s.filter(function(e){return e.includes("&")}),u=[],r=this.splitNames(r,a),e.next=18,this.getGenders(r,u);case 18:return r=e.sent,s=this.splitNames(s,a),e.next=22,this.getGenders(s,u);case 22:s=e.sent,t=(t=t.concat(this.mapNamesToOut(r,"male"))).concat(this.mapNamesToOut(s,"female")),this.setState({out1:t}),this.setState({step:2});case 27:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"mapNamesToOut",value:function(e,t){var a=this,n=[];return e.forEach(function(e){var r=e[e.names[0]],i=e[e.names[1]],s=0;s=r.gender===i.gender?r.gender!==t?r.probability>i.probability?1:0:r.probability<i.probability?1:0:r.gender===t?0:1,n.push({file:e.file,first:e.names[s],last:a.removeEnd(e.file).split(",")[0],gender:t,married:"true"})}),n}},{key:"splitNames",value:function(e,t){var a=this,n=[];return e.forEach(function(e){try{var r=a.removeEnd(e).split(",")[1].split("&");r=r.map(function(e){return e.trim()}),n.push({names:r,file:e})}catch(i){t.push(e)}}),n}},{key:"removeEnd",value:function(e){var t=e.split("-");return t.pop(),t.join("")}},{key:"addSingles",value:function(e,t,a){var n=this;(e=e.filter(function(e){return!e.includes("&")})).forEach(function(e){var r=n.removeEnd(e),i=r.split(",")[1],s=r.split(",")[0];a.push({file:e,first:i,last:s,gender:t,married:"false"})})}},{key:"getNames",value:function(e){var t=[];try{e.forEach(function(e,a){a.dir||a.name.startsWith("__MACOSX")||t.push(a.name)})}catch(a){alert(a.message),this.setState({step:0})}return t}},{key:"getGenders",value:function(){var e=Object(l.a)(c.a.mark(function e(t,a){var n,r,i,s,u,l,p;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=[],r=!0,i=!1,s=void 0,e.prev=4,u=c.a.mark(function e(){var t,r,i,s;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=p.value,(i=a.filter(function(e){return e.name===r.names[0].split(" ")[0]})).length){e.next=11;break}return e.next=5,fetch("https://api.genderize.io/?name="+r.names[0].split(" ")[0]);case 5:return e.next=7,e.sent.json();case 7:i=e.sent,a.push(i),e.next=12;break;case 11:i=i[0];case 12:if((s=a.filter(function(e){return e.name===r.names[1].split(" ")[0]})).length){e.next=22;break}return e.next=16,fetch("https://api.genderize.io/?name="+r.names[1].split(" ")[0]);case 16:return e.next=18,e.sent.json();case 18:s=e.sent,a.push(s),e.next=23;break;case 22:s=s[0];case 23:n.push((t={names:r.names},Object(o.a)(t,r.names[0],i),Object(o.a)(t,r.names[1],s),Object(o.a)(t,"file",r.file),t));case 24:case"end":return e.stop()}},e,this)}),l=t[Symbol.iterator]();case 7:if(r=(p=l.next()).done){e.next=12;break}return e.delegateYield(u(),"t0",9);case 9:r=!0,e.next=7;break;case 12:e.next=18;break;case 14:e.prev=14,e.t1=e.catch(4),i=!0,s=e.t1;case 18:e.prev=18,e.prev=19,r||null==l.return||l.return();case 21:if(e.prev=21,!i){e.next=24;break}throw s;case 24:return e.finish(21);case 25:return e.finish(18);case 26:return e.abrupt("return",n);case 27:case"end":return e.stop()}},e,this,[[4,14,18,26],[19,,21,25]])}));return function(t,a){return e.apply(this,arguments)}}()},{key:"getForm",value:function(){return r.a.createElement("div",{className:"App"},r.a.createElement("form",null,"Club Name: ",r.a.createElement("input",{type:"text",value:this.state.clubName,name:"clubName",onChange:this.textInput}),r.a.createElement("br",null),r.a.createElement("br",null),"Male zip file: ",r.a.createElement("input",{type:"file",name:"mFile",onChange:this.fileUpload}),r.a.createElement("br",null),r.a.createElement("br",null),"Female zip file: ",r.a.createElement("input",{type:"file",name:"fFile",onChange:this.fileUpload}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("input",{type:"submit",value:"Process",onClick:this.onSubmit})))}},{key:"getLoading",value:function(){return r.a.createElement("div",null,"Loading")}},{key:"getOutput",value:function(){return r.a.createElement("div",null,r.a.createElement(O.CSVLink,{data:this.state.out1,filename:this.state.clubName+"csv"},"Download Name-Game CSV for ",this.state.clubName),";")}},{key:"render",value:function(){return 0===this.state.step?this.getForm():1===this.state.step?this.getLoading():this.getOutput()}}]),t}(n.Component);s.a.render(r.a.createElement(y,null),document.getElementById("root"))},68:function(e,t,a){e.exports=a(137)},73:function(e,t,a){},77:function(e,t,a){},83:function(e,t){},85:function(e,t){}},[[68,2,1]]]);
//# sourceMappingURL=main.d983af64.chunk.js.map